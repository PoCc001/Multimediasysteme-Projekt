<!DOCTYPE html>
<html lang="de">
    <head>
		<!-- Shouldn't there be a JS-file to import the library for WebSocket? - No? -->
        <title>Streamchat</title>
        <meta charset="UTF-8"/>
        <link rel="stylesheet" href="style.css"/>
    </head>

    <body>
        <h1 class="chat">Chat-Fenster</h1>
        <div class="chat" id="wholechat">
            <div class="chat" id="chatbody">
                Bestehender Input
            </div>
            <div class="chat" id="input">
                <form action="" onsubmit="submit()">
                    <label for="chatinput">Chat text:</label>
                    <input id="chatinput" name="chatinput" type="text">
					<button>Submit</button>
                </form>
            </div>
        </div>

        <script lang="JavaScript">
			const wsURL = "ws://localhost:8000/ws";		// default --> must be changed later!
			const wsPort = null;	// default --> should be changed later!
			var websocket = new WebSocket(wsURL, wsPort);
			var chatbody = document.getElementById("chatbody");
			websocket.onmessage = function(event) {
				chatbody.innerHTML += ("<p>" + event.data + "</p>")
			};
			
			function sendMessage(event) {
				var input = document.getElementById("chatinput")
				// maybe compress text via Huffman-Encoding before?
				websocket.send(input.value)
				input.value = ''
				event.preventDefault()
			}
        </script>
    </body>
</html>
